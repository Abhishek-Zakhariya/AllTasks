<html>

<head>
  <link rel="stylesheet" href="/CURD_AJAX/style.css">
</head>

<h2>Name: Abhishek Zakhariya</h2>
<h3>Task: CRUD Operation Using AJAX</h3>

<body style="font-family: Verdana, Geneva, Tahoma, sans-serif;color: black;">
  <div class="main">
    <form action="" name="edit_job_app" id="form2" method="post">

      <!-- Basic detail -->
      <div class="tab" style="display: block;">
        <fieldset>
          <table style="padding: 10px;border-spacing: 10px;">
            <legend>Basic Detail </legend>

            <tr>
              <td rowspan="2"><label for="fname">First Name: </label>
                <input type="text" tabindex="1" id="fname" name="fname" value="<%= result.fname %>"><br>
              </td>
            </tr>
            <tr>
              <td><label for="lname">Last Name: </label>
                <input type="text" id="lname" tabindex="2" name="lname" value="<%= result.lname %>">
                <label id=" errlname"></label>
              </td>
            </tr>
            <tr>
              <td rowspan="2"><label for="designation">Designation: </label>
                <input type="text" id="designation" tabindex="3" name="designation" value="<%= result.designation %>">
              </td>
            </tr>
            <tr>
              <td><label>Gender: </label>
                <input type="radio" id="male" name="gender" tabindex="4" value="Male">
                <label for="male">Male</label>
                <input type="radio" id="female" name="gender" tabindex="5" value="Female">
                <label for="female">Female</label><br>
                <label id="errradio"></label>
              </td>
            </tr>
            <tr>
              <td rowspan="2"><label for="rel">Relationship: </label>
                <select name="Relationship" id="Relationship" tabindex="6">
                  <option value="Married">Married</option>
                  <option value="Unmarried">Unmarried</option>
                  <option value="Divorsed">Divorsed</option>
                </select><br> <label id="errrel"></label>
              </td>
            </tr>
            <tr>
              <td><label for="email">Email: </label>
                <input type="text" id="email" tabindex="7" name="email" value=<%= result.email %>><br>
                <label id="erremail"></label>
              </td>
            </tr>
            <tr>
              <td rowspan="2"><label for="phnno"> Phone no: </label>
                <input type="search" id="phnno" tabindex="8" name="phnno" value=<%= result.phn_no %>><br>
                <label id="errmob"></label>
              </td>
            </tr>
            <tr>
              <td><label for="add1">Address1: </label>
                <input type="text" id="add1" tabindex="9" name="add1" value=<%= result.addr1 %>>
              </td>
            </tr>
            <tr>
              <td rowspan="2"><label for="add2"> Address2: </label>
                <input type="text" id="add2" tabindex="10" name="add2" value=<%= result.addr2 %>>
              </td>
            </tr>
            <tr>
              <td><label for="city">City: </label>
                <input type="text" id="city" tabindex="11" name="city" value=<%= result.city %>>
              </td>
            </tr>
            <tr>
              <td rowspan="2"><label>State:</label>
                <select name="state" id="state" tabindex="12">
                  <option value="gujarat">Gujarat</option>
                  <option value="maharashtra">Maharashtra</option>
                  <option value="goa">Goa</option>
                  <option value="jk">J&K</option>
                  <option value="up">UP</option>
                </select>
              </td>
            </tr>
            <tr>
              <td><label for="dob"> DOB: </label>
                <input type="text" id="dob" name="dob" tabindex="13" value=<%=result.dob%>>
                <label id="errdob"></label>
              </td>
            </tr>
          </table>
        </fieldset>
      </div>
      <!-- Education Details -->
      <div class="tab" style="display:none;">
        <fieldset>
          <legend>Education Detail </legend>
          <table style="padding: 10px;border-spacing: 10px;">

            <% education.forEach(val => { %>
            <tr>
              <td><label for="coursename3">Course Name</label></td>

              <td><select name="coursename[]" id="edu<%=val.edu_id%>">
                  <option value="SSC">SSC</option>
                  <option value="HSC">HSC</option>
                  <option value="BBA">BBA</option>
                  <option value="MBA">MBA</option>
                </select>
                <label id="errcource"></label>
              </td>

              <td><label for="board">Name of board</label></td>
              <td><input type="text" id="board" tabindex="14" name="board[]" value=<%= val.board_or_uni %>>
                <label id="errtenboard"></label>
              </td>
              <td><label for="pass_year">Passsing Year</label></td>
              <td><input type="text" id="pass_year" tabindex="15" name="pass_year[]" value=<%= val.pass_year %>>
                <label id="errtenyear"></label>
              </td>
              <td><label for="percentage">Percentage</label></td>
              <td><input type="text" id="percentage" tabindex="16" name="percentage[]" value=<%= val.percentage %>>
                <label id="errtenperc" class="staticerr"></label>
              </td>
            </tr>

            <% }); %>

            <!-- <tr>
              <td><label>HSC/Diploma result</label></td>
            </tr>
            <tr>
              <td><label for="coursename4">Course Name</label></td>
              <td><select name="coursename[]" id="coursename4">
                  <option value="SSC">SSC</option>
                  <option value="HSC">HSC</option>
                  <option value="BBA">BBA</option>
                  <option value="MBA">MBA</option>
                </select>
                <label id="errcource"></label>
              </td>
              <td><label for="board2">Name of board</label></td>
              <td><input type="text" id="board2" tabindex="18" name="board[]"><br>
                <label id="errboard2"></label>
              </td>
              <td><label for="pass_year2">Passsing Year</label></td>
              <td><input type="text" id="pass_year2" tabindex="19" name="pass_year[]"><br>
                <label id="erryear2"></label>
              </td>
              <td><label for="percentage2">Percentage</label></td>
              <td><input type="text" id="percentage2" tabindex="20" name="percentage[]"><br>
                <label id="errperc2" class="staticerr"></label>
              </td>
            </tr>

            <tr>
              <td><label for="bachelor">Bachelor Result</label></td>
            </tr>
            <tr>
              <td><label for="coursename">Course Name</label></td>
              <td><select name="coursename[]" id="coursename">
                  <option value="SSC">SSC</option>75
                </select>
                <label id="errcource"></label>
              </td>

              <td><label for="uni">University</label></td>
              <td><input type="text" id="uni" tabindex="22" name="board[]"><br>
                <label id="erruni"></label>
              </td>
              <td><label for="pass_year3">Passing Year</label></td>
              <td><input type="text" id="pass_year3" tabindex="23" name="pass_year[]"><br>
                <label id="erryear3"></label>
              </td>
              <td><label for="precentage3">Percentage</label></td>
              <td><input type="text" id="percentage3" tabindex="24" name="percentage[]"><br>
                <label id="errperc3" class="staticerr"></label>
              </td>
            </tr>

            <tr>
              <td><label for="master">Master Result</label></td>
            </tr>
            <tr>
              <td><label for="coursename2">Course Name</label></td>
              <td><select name="coursename[]" id="coursename2">
                  <option value="SSC">SSC</option>
                  <option value="HSC">HSC</option>
                  <option value="BBA">BBA</option>
                  <option value="MBA">MBA</option>
                </select>
                <label id="errcource"></label>
              </td>


              <td><label for="uni2">University</label></td>
              <td><input type="text" id="uni2" tabindex="26" name="board[]"><br>
                <label id="erruni2"></label>
              </td>
              <td><label for="pass_year4">Passing Year</label></td>
              <td><input type="text" id="pass_year4" tabindex="27" name="pass_year[]"><br>
                <label id="erryear4"></label>
              </td>
              <td><label for="precentage4">Percentage</label></td>
              <td><input type="text" id="percentage4" tabindex="28" name="percentage[]"><br>
                <label id="errperc4" class="staticerr"></label>
              </td>
            </tr> -->
          </table>
        </fieldset>
      </div>


      <!-- Work Experience -->
      <div class="tab" style="display: none;">
        <fieldset>
          <legend>Work Experience</legend>

          <table style="padding: 10px;border-spacing: 10px;">
            <% experience.forEach(val => { %>
            <tr>
              <td><label for="cmpnname">Comapany Name </label></td>
              <td><input type="text" id="cmpnname" tabindex="27" name="cmpnname[]" value=<%= val.cmp_name %>></td>
              <td><label for="desig">Designation </label></td>
              <td><input type="text" id="desig" tabindex="28" name="desig[]" value=<%= val.designation %>><br>

              </td>
              <td><label for="start_date">From </label></td>
              <td><input type="text" id="start_date" tabindex="29" name="start_date[]" value=<%= val.from_date %>><br>
                <label id="errstart" class="staticerr"></label>
              </td>
              <td><label for="end_date">To </label></td>
              <td><input type="text" id="end_date" tabindex="30" name="end_date[]" value=<%= val.to_date %>><br>
                <label id="errend" class="staticerr"></label>
              </td>
            </tr>
            <% }); %>


            <!-- <tr>
              <td><label for="cmpnname1">Comapany Name </label></td>
              <td><input type="text" id="cmpnname1" tabindex="31" name="cmpnname[]"></td>
              <td><label for="desig1">Designation </label></td>
              <td><input type="text" id="desig1" tabindex="32" name="desig[]"><br>
              </td>
              <td><label for="start_date1">From </label></td>
              <td><input type="text" id="start_date1" tabindex="33" name="start_date[]"><br>
                <label id="errstart1" class="staticerr"></label>
              </td>
              <td><label for="end_date1">To </label></td>
              <td><input type="text" id="end_date1" tabindex="34" name="end_date[]"><br>
                <label id="errend1" class="staticerr"></label>
              </td>
            </tr> -->

            <!-- <tr>
              <td><label for="cmpnname2">Comapany Name </label></td>
              <td><input type="text" id="cmpnname2" tabindex="35" name="cmpnname[]"></td>
              <td><label for="desig2">Designation </label></td>
              <td><input type="text" id="desig2" tabindex="36" name="desig[]"><br>
              </td>
              <td><label for="start_date2">From </label></td>
              <td><input type="text" id="start_date2" tabindex="37" name="start_date[]"><br>
                <label id="errstart2" class="staticerr"></label>
              </td>
              <td><label for="end_date2">To </label></td>
              <td><input type="text" id="end_date2" tabindex="38" name="end_date[]"><br>
                <label id="errend2" class="staticerr"></label>
              </td>
            </tr> -->
          </table>
        </fieldset>
      </div>

      <!-- Language_Known  && Technologies-->
      <div class="tab" style="display: none;">
        <table style="padding: 10px;border-spacing: 10px;">
          <tr>
            <td>
              <fieldset style="width: 40%;">
                <legend>Language Known</legend>
                <table style="padding: 10px;border-spacing: 10px;">


                  <tr>
                    <td><input type="checkbox" id="hindi" tabindex="39" value="hindi" name="Language[]"></td>
                    <td><label for="hindi">Hindi</label></td>
                    <td><input type="checkbox" id="read1" tabindex="40" value="read" name="hindi[]"></td>
                    <td><label for="read1">Read</label></td>
                    <td><input type="checkbox" id="write1" tabindex="41" value="write" name="hindi[]"></td>
                    <td><label for="write1">Write</label></td>
                    <td><input type="checkbox" id="speak1" tabindex="42" value="speak" name="hindi[]"></td>
                    <td><label for="speak1">Speak</label></td>
                  </tr>

                  <tr>
                    <td><input type="checkbox" id="english" tabindex="43" value="english" name="Language[]"></td>
                    <td><label for="english">English</label></td>
                    <td><input type="checkbox" id="read2" tabindex="44" value="read" name="english[]"></td>
                    <td><label for="read2">Read</label></td>
                    <td><input type="checkbox" id="write2" tabindex="45" value="write" name="english[]"></td>
                    <td><label for="write2">Write</label></td>
                    <td><input type="checkbox" id="speak2" tabindex="46" value="speak" name="english[]"></td>
                    <td><label for="speak2">Speak</label></td>
                  </tr>

                  <tr>
                    <td><input type="checkbox" id="gujarati" tabindex="47" value="gujarati" name="Language[]"></td>
                    <td><label for="gujarati">Gujarati</label></td>
                    <td><input type="checkbox" id="read3" tabindex="48" value="read" name="gujarati[]"></td>
                    <td><label for="read3">Read</label></td>
                    <td><input type="checkbox" id="write3" tabindex="49" value="write" name="gujarati[]"></td>
                    <td><label for="write3">Write</label></td>
                    <td><input type="checkbox" id="speak3" tabindex="50" value="speak" name="gujarati[]"></td>
                    <td><label for="speak3">Speak</label></td>
                  </tr>
                </table>
              </fieldset>
            </td>
            <td>

              <fieldset style="width: 60%;">
                <legend>Technologies you know</legend>

                <table style="padding: 10px;border-spacing: 10px;">
                  <tr>
                    <td><input type="checkbox" id="php" tabindex="51" name="tech[]" value="php"></td>
                    <td><label for="php">PHP</label>
                      <label id="errphp"></label>
                    </td>
                    <td><input type="radio" id="beg1" tabindex="52" value="Beginner" name="skill1"></td>
                    <td><label for="beg1">Beginer</label></td>
                    <td><input type="radio" id="mid1" tabindex="53" value="Mideator" name="skill1"></td>
                    <td><label for="mid1">Mideator</label></td>
                    <td><input type="radio" id="exp1" tabindex="54" value="Expert" name="skill1"></td>
                    <td><label for="exp1" id="lblexp1">Expert</label></td>
                    <td><label id="errpro" class="staticerr"></label></td>
                  </tr>

                  <tr>
                    <td><input type="checkbox" id="mysql" tabindex="55" name="tech[]" value="mysql"></td>
                    <td><label for="mysql">Mysql</label></td>
                    <td><input type="radio" id="beg2" tabindex="56" value="Beginner" name="skill2"></td>
                    <td><label for="beg2">Beginer</label></td>
                    <td><input type="radio" id="mid2" tabindex="57" value="Mideator" name="skill2"></td>
                    <td><label for="mid2">Mideator</label></td>
                    <td><input type="radio" id="exp2" tabindex="58" value="Expert" name="skill2"></td>
                    <td><label for="exp2" id="lblexp2">Expert</label></td>
                    <td><label id="errpro2" class="staticerr"></label></td>
                  </tr>

                  <tr>
                    <td><input type="checkbox" id="laravel" tabindex="59" name="tech[]" value="laravel"></td>
                    <td><label for="laravel">Laravel</label></td>
                    <td><input type="radio" id="beg3" tabindex="60" value="Beginner" name="skill3"></td>
                    <td><label for="beg3">Beginer</label></td>
                    <td><input type="radio" id="mid3" tabindex="61" value="Mideator" name="skill3"></td>
                    <td><label for="mid3">Mideator</label></td>
                    <td><input type="radio" id="exp3" tabindex="62" value="Expert" name="skill3"></td>
                    <td><label for="exp3" id="lblexp3">Expert</label></td>
                    <td><label id="errpro3" class="staticerr"></label></td>
                  </tr>

                  <tr>
                    <td><input type="checkbox" id="oracle" tabindex="63" name="tech[]" value="oracle"></td>
                    <td><label for="oracle">Oracle</label></td>
                    <td><input type="radio" id="beg4" tabindex="64" value="Beginner" name="skill4"></td>
                    <td><label for="beg4">Beginer</label></td>
                    <td><input type="radio" id="mid4" tabindex="65" value="Mideator" name="skill4"></td>
                    <td><label for="mid4">Mideator</label></td>
                    <td><input type="radio" id="exp4" tabindex="66" value="Expert" name="skill4"></td>
                    <td><label for="exp4" id="lblexp4">Expert</label></td>
                    <td><label id="errpro4" class="staticerr"></label></td>
                  </tr>

                </table>
              </fieldset>
            </td>
          </tr>
        </table>
      </div>


      <!-- Reference Contact -->
      <div class="tab" style="display: none;">
        <fieldset style="width: 60%;">
          <legend>Reference Contact</legend>
          <table style="padding: 10px;border-spacing: 10px;">
            <% reference.forEach(val => { %>
            <tr>
              <td><label for="name">Name </label></td>
              <td><input type="text" id="name<%= val.ref_id %>" tabindex="67" name="name[]" value=<%= val.name %>></td>
              <td><label for="contact">Contact Number </label></td>
              <td><input type="text" id="contact<%= val.ref_id %>" tabindex="68" name="contact[]" value=<%= val.contact%>></td>
              <td><label for="rel3">Relation </label></td>
              <td><input type="text" id="rel<%= val.ref_id %>" tabindex="69" name="rel[]" value=<%= val.relation%>></td>
            </tr>
            <% }); %>

            <!-- <tr>
              <td><label for="name2">Name </label></td>
              <td><input type="text" id="name2" tabindex="70" name="name[]"></td>
              <td><label for="contact2">Contact Number </label></td>
              <td><input type="text" id="contact2" tabindex="71" name="contact[]"></td>
              <td><label for="rel2">Relation </label></td>
              <td><input type="text" id="rel2" tabindex="72" name="rel[]"></td>
            </tr> -->
          </table>
        </fieldset>
      </div>

      <!-- Preference Detail -->

      <div class="tab" style="display: none;">
        <fieldset>
          <legend>Preferences</legend>
          <table style="padding: 10px;border-spacing: 10px;">
            <tr>
              <td colspan="2"><label for="loc"> Prefered Location </label></td>
              <td><input type="text" id="loc" tabindex="73" name="loc" value="<%= preference.location %>"></td>
            </tr>
            <tr>
              <td colspan="2"><label for="notice">Notice Period </label></td>
              <td><input type="text" id="notice" tabindex="74" name="notice" value="<%= preference.notice_period %>"></td>
            </tr>
            <tr>
              <td colspan="2"><label for="exp_ctc">Expected CTC </label></td>
              <td><input type="text" id="exp_ctc" tabindex="75" name="exp_ctc" value=<%= preference.exp_ctc %>></td>
            </tr>
            <tr>
              <td colspan="2"><label for="cur_ctc">Current CTC </label></td>
              <td><input type="text" id="cur_ctc" tabindex="76" name="cur_ctc" value=<%= preference.cur_ctc %>></td>
            </tr>
            <tr>
              <td colspan="2"><label for="dept">Department </label> </td>
              <td><select type="text" id="dept" tabindex="77" name="dept">
                  <option value="designing">Designing</option>
                  <option value="development" selected>Development</option>
                  <option value="marketing">Marketing</option>
                </select></td>
            </tr>
          </table>
        </fieldset>

      </div>

      <table style="padding: 10px;border-spacing: 10px;">

        <tr>
          <td>
            <p value="Previous" id="pre" onclick="showtab(-1)" tabindex="78">Previous</p>
          </td>
          <td>
            <p value="Next" id="next" onclick="showtab(1)" tabindex="81">Next</p>
          </td>
          <td>
            <input type="hidden" name="id" value=<%= emp_id %>>
            <p value="Submit" id="submit" onclick="updateData()" tabindex="79" style="display: none;">Submit</p>
          </td>
        </tr>
      </table>
    </form>
  </div>
  <div>
    <p id="msg1" style="display: none;">

    </p>
  </div>

  <% let gender = result.gender %>
  <% let state = result['state'] %>
  <% let relationship = result['relationship'] %>
  <% var education1 = JSON.stringify(education) %>
  <% let language1 = JSON.stringify(language) %>
  <% let techno = JSON.stringify(technology) %>
  <% let preference1 = preference['dept'] %>

  <script>
    let gender = `<%- gender %>`;
    let state = `<%- state %>`;
    let relation = `<%- relationship %>`;
    let pref = `<%- preference1 %>`;


    document.querySelector(`input[value="${gender}"]`).checked = true;
    document.querySelector(`option[value="${state}"]`).selected = true;
    document.querySelector(`option[value="${relation}"]`).selected = true;

    // Preference Data
    document.querySelector(`option[value="${pref}"]`).selected = true;


    // Fetch Education

    let edu = JSON.parse(`<%- education1%>`)

    edu.forEach(element => {
      let eduId = document.querySelector(`#edu${element.edu_id}`);
      eduId.value = element.course_name;
    });

    // Fetch Language data 

    let lang = JSON.parse(`<%- language1%>`)

    lang.forEach(element => {
      if (element.language == 'hindi') {
        document.getElementById('hindi').checked = true;
        if (element.ability == 'read') {
          document.getElementById('read1').checked = true;
        }
        if (element.ability == 'write') {
          document.getElementById('write1').checked = true;
        }
        if (element.ability == 'speak') {
          document.getElementById('speak1').checked = true;
        }
      }

      if (element.language == 'english') {
        document.getElementById('english').checked = true;
        if (element.ability == 'read') {
          document.getElementById('read2').checked = true;
        }
        if (element.ability == 'write') {
          document.getElementById('write2').checked = true;
        }
        if (element.ability == 'speak') {
          document.getElementById('speak2').checked = true;
        }
      }

      if (element.language == 'gujarati') {
        document.getElementById('gujarati').checked = true;
        if (element.ability == 'read') {
          document.getElementById('read3').checked = true;
        }
        if (element.ability == 'write') {
          document.getElementById('write3').checked = true;
        }
        if (element.ability == 'speak') {
          document.getElementById('speak3').checked = true;
        }
      }
    })

    // fetch Technologies Data

    let tech = JSON.parse(`<%- techno %>`)
    tech.forEach(element => {
      if (element.technology == 'php') {
        document.getElementById('php').checked = true;
        if (element.proficiency == 'Beginner') {
          document.getElementById('beg1').checked = true;
        }
        if (element.proficiency == 'Mideator') {
          document.getElementById('mid1').checked = true;
        }
        if (element.proficiency == 'Expert') {
          document.getElementById('exp1').checked = true;
        }
      }

      if (element.technology == 'mysql') {
        document.getElementById('mysql').checked = true;
        if (element.proficiency == 'Beginner') {
          document.getElementById('beg2').checked = true;
        }
        if (element.proficiency == 'Mideator') {
          document.getElementById('mid2').checked = true;
        }
        if (element.proficiency == 'Expert') {
          document.getElementById('exp2').checked = true;
        }
      }

      if (element.technology == 'oracle') {
        document.getElementById('oracle').checked = true;
        if (element.proficiency == 'Beginner') {
          document.getElementById('beg3').checked = true;
        }
        if (element.proficiency == 'Mideator') {
          document.getElementById('mid3').checked = true;
        }
        if (element.proficiency == 'Expert') {
          document.getElementById('exp3').checked = true;
        }
      }

      if (element.technology == 'laravel') {
        document.getElementById('laravel').checked = true;
        if (element.proficiency == 'Beginner') {
          document.getElementById('beg4').checked = true;
        }
        if (element.proficiency == 'Mideator') {
          document.getElementById('mid4').checked = true;
        }
        if (element.proficiency == 'Expert') {
          document.getElementById('exp4').checked = true;
        }
      }
    });
  </script>
  <script src="/CURD_AJAX/script.js"></script>
</body>

</html>